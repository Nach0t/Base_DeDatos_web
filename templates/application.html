<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <title>Application - Search</title>
  </head>
  <body>
    <div class="container">
      <h1>Search in Database</h1>
      <form method="GET" action="{{ url_for('application') }}">
        <input
          type="text"
          name="query"
          placeholder="Search by name or RUT..."
          value="{{ query }}"
        />
        <button type="submit">Search</button>
      </form>

      {% if query %}
      <h2>Search Results for "{{ query }}"</h2>

      <!-- Display Students -->
      <h3>Students</h3>
      <ul>
        {% for student in results.students %}
        <li>
          {{ student.first_name }} {{ student.last_name_paternal }} {{
          student.last_name_maternal }} (RUT: {{ student.rut }})
        </li>
        {% else %}
        <li>No students found.</li>
        {% endfor %}
      </ul>

      <!-- Display Professors -->
      <h3>Professors</h3>
      <ul>
        {% for professor in results.professors %}
        <li>{{ professor.name }}</li>
        {% else %}
        <li>No professors found.</li>
        {% endfor %}
      </ul>

      <!-- Display Courses -->
      <h3>Courses</h3>
      <ul>
        {% for course in results.courses %}
        <li>{{ course.name }}</li>
        {% else %}
        <li>No courses found.</li>
        {% endfor %}
      </ul>

      <!-- Display Grades -->
      <h3>Grades</h3>
      <ul>
        {% for grade in results.grades %}
        <li>
          {{ grade.student.first_name }} {{ grade.student.last_name_paternal }}
          - {{ grade.percentage.name }}: {{ grade.grade }}
        </li>
        {% else %}
        <li>No grades found.</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
  </body>
</html>
